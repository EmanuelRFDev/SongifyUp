let menuVisible=!1;function mostrarOcultarMenu(){const nav=document.getElementById("nav");nav.classList.toggle("responsive");menuVisible=!menuVisible}
function closeMenu(){const nav=document.getElementById("nav");nav.classList.remove("responsive");menuVisible=!1}
function seleccionar(){document.getElementById("nav").classList="";menuVisible=!1}
const header=document.querySelector("[data-header]");const activeElementOnScroll=function(){if(window.scrollY>100){header.classList.add("active")}else{header.classList.remove("active")}}
window.addEventListener("scroll",activeElementOnScroll);const buttons=document.querySelectorAll('.controls button');buttons.forEach(button=>{button.addEventListener('click',()=>{buttons.forEach(btn=>btn.classList.remove('active'));button.classList.add('active')})});let boton=document.getElementById("btregistrar");boton.addEventListener("click",evento=>{registrarCanciones()});let registrarCanciones=async()=>{let campos={};campos.song=document.getElementById("song").value;campos.artist=document.getElementById("artist").value;campos.gender=document.getElementById("gender").value;const peticion=await fetch("https://apirestsongifyup.onrender.com/api/music/save",{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json',},body:JSON.stringify(campos)})}
const progress=document.getElementById("progress");const song=document.getElementById("audio");const controlIcon=document.getElementById("controlIcon");const playPauseButton=document.querySelector(".play-pause-btn");const forwardButton=document.querySelector(".controls button.forward");const backwardButton=document.querySelector(".controls button.backward");const songName=document.querySelector(".music-player h1");const artistName=document.querySelector(".music-player p");const playerVolumeRange=document.getElementById("volume");const playerVolumeBtn=document.getElementById("volume-btn");const playerRepeatBtn=document.getElementById("repeat-btn");const playerShuffleBtn=document.getElementById("shuffle-btn");const songs=[{title:"Amour Plastique",name:"Matthieu Reynaud",source:"assets/songs/NapoleonSong.mp3",backgroundImage:"assets/images/Napoleon.webp",},{title:"See You Again",name:"Wiz Khalifa",source:"assets/songs/WizkalifaSeeyou again.mp3",backgroundImage:"assets/images/Wizkhalifa.webp",},{title:"Blinding Lights",name:"The Weekend",source:"assets/songs/TheWeekndBlindingLights.mp3",backgroundImage:"assets/images/theweekend.webp",},{title:"You'll Never Walk Alone",name:"Gerry & The Pacemakers",source:"assets/songs/You'llNeverWalkAlone.wav",backgroundImage:"assets/images/liverpol2.webp",},{title:"Like a Prayer",name:"Madonna",source:"assets/songs/MadonnaDeadpool.mp3",backgroundImage:"assets/images/deadpool.webp",},{title:"The reason",name:"Hoobastank",source:"assets/songs/HoobastankThe Reason.mp3",backgroundImage:"assets/images/hoovestank.webp",},{title:"Nighcall",name:"ùêäùêöùêØùê¢ùêßùê¨ùê§ùê≤",source:"assets/songs/LiterallymeNightcallSlowedReverb.mp3",backgroundImage:"assets/images/wolves.webp",},];let currentSongIndex=3;function updateSongInfo(){songName.textContent=songs[currentSongIndex].title;artistName.textContent=songs[currentSongIndex].name;song.src=songs[currentSongIndex].source;document.body.style.backgroundImage=`url(${songs[currentSongIndex].backgroundImage})`;song.addEventListener("loadeddata",function(){})}
song.addEventListener("timeupdate",function(){if(!song.paused){progress.value=song.currentTime}});song.addEventListener("loadedmetadata",function(){progress.max=song.duration;progress.value=song.currentTime});function pauseSong(){song.pause();controlIcon.classList.remove("fa-pause");controlIcon.classList.add("fa-play")}
function playSong(){song.play();controlIcon.classList.add("fa-pause");controlIcon.classList.remove("fa-play")}
function playPause(){if(song.paused){playSong()}else{pauseSong()}}
playPauseButton.addEventListener("click",playPause);progress.addEventListener("input",function(){song.currentTime=progress.value});progress.addEventListener("change",function(){playSong()});forwardButton.addEventListener("click",function(){currentSongIndex=(currentSongIndex+1)%songs.length;updateSongInfo();playPause()});backwardButton.addEventListener("click",function(){currentSongIndex=(currentSongIndex-1+songs.length)%songs.length;updateSongInfo();playPause()});updateSongInfo();function changeVolume(){song.volume=playerVolumeRange.value;if(song.volume<=0.1){playerVolumeBtn.children[0].textContent="volume_mute"}else if(song.volume<=0.5){playerVolumeBtn.children[0].textContent="volume_down"}else{playerVolumeBtn.children[0].textContent="volume_up"}}
playerVolumeRange.addEventListener("input",changeVolume);song.volume=playerVolumeRange.value;song.volume=playerVolumeRange.value;const muteVolume=function(){song.muted=!song.muted;playerVolumeBtn.children[0].textContent=song.muted?"volume_off":"volume_up"}
playerVolumeBtn.addEventListener("click",muteVolume);const repeat=function(){song.loop=!song.loop;if(song.loop){this.classList.add("active");playerRepeatBtn.children[0].style.display="none";playerRepeatBtn.children[1].style.display="block"}else{this.classList.remove("active");playerRepeatBtn.children[0].style.display="block";playerRepeatBtn.children[1].style.display="none"}}
playerRepeatBtn.addEventListener("click",repeat);let isShuffled=!1;const shuffle=function(){isShuffled=!0;playerShuffleBtn.classList.add("active");selectRandomSong()}
playerShuffleBtn.addEventListener("click",shuffle);function selectRandomSong(){const actions=[{direction:'backward',clicks:3},{direction:'forward',clicks:3},{direction:'backward',clicks:2},{direction:'forward',clicks:2},{direction:'backward',clicks:1},{direction:'forward',clicks:1}];const{direction,clicks}=actions[Math.floor(Math.random()*actions.length)];for(let i=0;i<clicks;i++){(direction==='forward'?forwardButton:backwardButton).click()}
updateSongInfo();playSong()}
song.addEventListener("ended",function(){if(song.loop){song.currentTime=0;playSong()}else if(isShuffled){selectRandomSong()}else{forwardButton.click()}});var swiper=new Swiper(".swiper",{effect:"coverflow",centeredSlides:!0,initialSlide:2,slidesPerView:"auto",allowTouchMove:!1,spaceBetween:40,coverflowEffect:{rotate:25,stretch:0,depth:50,modifier:1,slideShadows:!1,},navigation:{nextEl:".forward",prevEl:".backward",},})